<!DOCTYPE html>
<html>
{%load static%}
<head>
  <!-- Basic -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <!-- Mobile Metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <!-- Site Metas -->
  <meta name="keywords" content="" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">

  <title>SafeZone</title>

  <!-- bootstrap core css -->
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}" />

  <!-- fonts style -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700|Poppins:400,600,700&display=swap" rel="stylesheet" />

  <!-- Custom styles for this template -->
  <link href="{% static 'css/style.css' %}" rel="stylesheet" />
  <!-- responsive style -->
  <link href="{% static 'css/responsive.css' %}" rel="stylesheet" />

  <!-- In your HTML head, include the Google Maps JavaScript API -->
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBtZQijM7JpE--1CM6SeTS3ylbZiFsn8to"></script>

  <style>
    .glowing-text {
  display: inline-block;
  text-align: center;
  font-size: 2rem;
  font-weight: bold;
  color: yellow;
  text-shadow: 0 0 5px yellow, 0 0 10px yellow, 0 0 15px #ffcc00, 0 0 20px #ff9900;
  }
  .form-container {
    max-width: 500px;
    margin: auto;
    padding: 30px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
  }
  .form-group label {
    font-weight: 600;
    display: block;
    margin-bottom: 5px;
  }
  .form-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 16px;
  }
  .btn-box {
    text-align: center;
    margin-top: 15px;
  }
  .btn-box button {
    width: 100%;
    padding: 10px;
    font-size: 18px;
    font-weight: bold;
  }
  .login-link {
    text-align: center;
    margin-top: 10px;
    font-size: 14px;
  }
  .custom-btn {
    background-color: #d4af37; /* Dull Yellow */
    color: black; /* Text color */
    border: 2px solid #d4af37; /* Yellow border */
    padding: 10px 20px;
    font-size: 18px;
    font-weight: bold;
    border-radius: 5px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .custom-btn:hover {
    background-color: white; /* Inside turns white on hover */
    color: #d4af37; /* Text changes to yellow */
    border-color: #d4af37; /* Border remains yellow */
  }
  .login-link {
    text-align: center;
    font-size: 16px;
    font-weight: 500;
    color: white; /* Slightly dark text for readability */
    margin-top: 15px;
  }

  .login-btn {
    color: #d4af37; /* Dull yellow for elegance */
    font-weight: bold;
    text-decoration: none;
    transition: color 0.3s ease, text-shadow 0.3s ease;
  }

  .login-btn:hover {
    color: #ffcc00; /* Brighter yellow on hover */
    text-shadow: 0px 0px 8px rgba(255, 204, 0, 0.8); /* Soft glowing effect */
  }
  .form-group label, .form-group input {
    font-weight: bold;}

    .sophisticated-button {
  display: inline-flex;          /* Use flexbox to align the spinner next to text */
  align-items: center;           /* Vertically center the text and spinner */
  padding: 6px 12px;             /* Smaller padding for a smaller button */
  font-size: 14px;               /* Smaller font size */
  font-weight: 600;
  text-align: center;
  color: #fff;
  background: linear-gradient(135deg, #d4af37, #aaa);
  border: none;
  border-radius: 30px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  cursor: pointer;
  transition: all 0.3s ease;
  width: auto;                   /* Adjust width based on content */
}

.sophisticated-button:hover {
  background: linear-gradient(135deg, #ffcc00, #aaa, #000);
  transform: translateY(-2px);
  box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
}

.sophisticated-button:active {
  transform: translateY(0);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.spinner {
  display: inline-block;
  width: 20px;                   /* Smaller size for the spinner */
  height: 20px;
  border: 3px solid #f3f3f3;
  border-top: 3px solid #d4af37;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-left: 8px;              /* Space between text and spinner */
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#loading-spinner {
  display: none;  /* Hide spinner initially */
}

.pac-container {
            z-index: 10000; /* Ensure suggestions dropdown is above other elements */
}

.location-btn {
      font-size: 16px;
      padding: 10px 20px;
      border-radius: 8px;
      transition: all 0.3s ease-in-out;
      box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
      font-weight: 500;
  }

  .confirm {
      background: linear-gradient(135deg, #28a745, #218838);
      border: none;
      color: white;
  }

  .confirm:hover {
      background: linear-gradient(135deg, #218838, #1e7e34);
      transform: translateY(-2px);
      box-shadow: 2px 4px 12px rgba(40, 167, 69, 0.3);
  }

  .deny {
      border: 2px solid #dc3545;
      color: #dc3545;
      background: white;
  }

  .deny:hover {
      background: #dc3545;
      color: white;
      transform: translateY(-2px);
      box-shadow: 2px 4px 12px rgba(220, 53, 69, 0.3);
  }

</style>
</head>

<body class="sub_page">
  <div class="hero_area">
    <!-- header section starts -->
    <div class="hero_bg_box">
      <div class="img-box">
        <img src="{% static 'images/hero-bg.jpg' %}" alt="">
      </div>
    </div>

    <header class="header_section">
      <div class="header_top">
        <div class="container-fluid">
          <div class="contact_link-container">
            <a href="" class="contact_link1">
              <i class="fa fa-map-marker" aria-hidden="true"></i>
              <span>
                University of Ibadan
              </span>
            </a>
            <a href="" class="contact_link2">
              <i class="fa fa-phone" aria-hidden="true"></i>
              <span>
                +234 8141282955
              </span>
            </a>
            <a href="" class="contact_link3">
              <i class="fa fa-envelope" aria-hidden="true"></i>
              <span>
                safezone@outlook.com
              </span>
            </a>
          </div>
        </div>
      </div>
      <div class="header_bottom">
        <div class="container-fluid">
          <nav class="navbar navbar-expand-lg custom_nav-container">
            <a class="navbar-brand" href="{% url 'home' %}">
              <span>
                SafeZone
              </span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
              <span class=""></span>
            </button>

            <div class="collapse navbar-collapse ml-auto" id="navbarSupportedContent">
              <ul class="navbar-nav">
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'responders' %}"> Responders </a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="{% url 'contact' %}">About us</a>
                </li>
              </ul>
            </div>
          </nav>
        </div>
      </div>
    </header>
    <!-- end header section -->
  </div>

  <!-- about section -->

  <section class="about_section layout_padding">
    <div class="container">
      <div class="row">
        <div class="col-md-6 px-0">
          <div class="img_container">
            <div class="img-box">
              <img src="{% static 'images/about-img.jpg' %}" alt="" />
            </div>
          </div>
        </div>
        <div class="col-md-6 px-0">
          <div class="detail-box">
            <div class="heading_container ">
              <h2>
                Report An Incident
              </h2>
            </div>
            <form id="incident-form" method="POST" action="{% url 'save_incident' %}">
              {% csrf_token %}
              {% if form.non_field_errors or form.errors %}
              <div class="alert alert-danger">
                {% for error in form.non_field_errors %}
                  <p>{{ error }}</p>
                {% endfor %}
                {% for field in form %}
                  {% for error in field.errors %}
                    <p>{{ field.label }}: {{ error }}</p>
                  {% endfor %}
                {% endfor %}
              </div>
              {% endif %}


              <div class="form-group">
                <label for="{{ form.category.id_for_label }}">Type Of Incident</label>
                <select class="form-control" id="{{ form.category.id_for_label }}" name="{{ form.category.name }}" required>
                  <option value="medical" {% if form.category.value == 'medical' %}selected{% endif %}>Medical</option>
                  <option value="fire" {% if form.category.value == 'fire' %}selected{% endif %}>Fire</option>
                  <option value="security" {% if form.category.value == 'security' %}selected{% endif %}>Security</option>
                  <option value="other" {% if form.category.value == 'other' %}selected{% endif %}>Other</option>
                </select>
              </div>
              <br>
              <div class="form-group">
                <label for="{{ form.severity.id_for_label }}">Severity Of The Incident</label>
                <select class="form-control" id="{{ form.severity.id_for_label }}" name="{{ form.severity.name }}" required>
                  <option value="low" {% if form.severity.value == 'low' %}selected{% endif %}>Low</option>
                  <option value="medium" {% if form.severity.value == 'medium' %}selected{% endif %}>Medium</option>
                  <option value="high" {% if form.severity.value == 'high' %}selected{% endif %}>High</option>
                  <option value="critical" {% if form.severity.value == 'critical' %}selected{% endif %}>Critical</option>
                </select>
              </div><br>
              
              <div class="form-group">
                <label for="{{ form.user_input_location.id_for_label }}">User/Incident's Location</label>
                <input type="text" class="form-control" id="user_input_location" name="{{ form.user_input_location.name }}" value="{{ form.user_input_location.value|default:'' }}" required />
              </div>
              
              <!-- Live Location Button and Spinner -->
              <div class="form-group">
                <button type="button" class="sophisticated-button" id="get-location">
                  <span id="button-text">Use My Live Location</span>
                  <div id="loading-spinner" class="spinner" style="display:none;"></div>
                </button>

                <div id="location-confirmation" class="confirmation-message" style="display:none;">
                  <p>We need access to your location to provide better services. Would you like to proceed?</p>
                  <button class="btn btn-primary location-btn confirm" onclick="confirmLocation()">✔ Yes, Share Location</button>
                  <button class="btn btn-outline-danger location-btn deny" onclick="denyLocation()">✖ No, I prefer not to</button>
              </div>
              </div>
              <br>
              <br>
              <!-- Hidden fields for latitude and longitude -->
              <input type="hidden" id="latitude" name="latitude">
              <input type="hidden" id="longitude" name="longitude">
              
              <div class="btn-box">
                <button type="submit" class="custom-btn">Report</button>
              </div>
            </form>            
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- end about section -->
   <!-- info section -->
   <section class="info_section">
    <div class="container">
      <div class="row">
        <!-- SafeZone Logo & Description -->
        <div class="col-md-3">
          <div class="info_logo">
            <a class="navbar-brand" href="index.html">
              <span>
                SafeZone
              </span>
            </a>
            <p>
              SafeZone is your reliable platform for real-time incident reporting and campus safety, connecting you quickly with emergency responders.
            </p>
          </div>
        </div>
        <!-- Useful Links -->
        <div class="col-md-3">
          <div class="info_links">
            <h5>
              Useful Links
            </h5>
            <ul>
              <li>
                <a href="#">About SafeZone</a>
              </li>
              <li>
                <a href="#">Our Services</a>
              </li>
              <li>
                <a href="#">Emergency Contacts</a>
              </li>
              <li>
                <a href="#">FAQs</a>
              </li>
            </ul>
          </div>
        </div>
        <!-- Contact Information -->
        <div class="col-md-3">
          <div class="info_info">
            <h5>
              Contact Us
            </h5>
          </div>
          <div class="info_contact">
            <a href="#">
              <i class="fa fa-map-marker" aria-hidden="true"></i>
              <span>
                University of Ibadan, Nigeria
              </span>
            </a>
            <a href="#">
              <i class="fa fa-phone" aria-hidden="true"></i>
              <span>
                Call : +234 803 123 4567
              </span>
            </a>
            <a href="#">
              <i class="fa fa-envelope" aria-hidden="true"></i>
              <span>
                info@safezone.ng
              </span>
            </a>
          </div>
        </div>
        <!-- Newsletter & Social Media -->
        <div class="col-md-3">
          <div class="info_form">
            <h5>
              Newsletter
            </h5>
            <form action="#">
              <input type="email" placeholder="Enter your email">
              <button>
                Subscribe
              </button>
            </form>
            <div class="social_box">
              <a href="#">
                <i class="fa fa-facebook" aria-hidden="true"></i>
              </a>
              <a href="#">
                <i class="fa fa-twitter" aria-hidden="true"></i>
              </a>
              <a href="#">
                <i class="fa fa-youtube" aria-hidden="true"></i>
              </a>
              <a href="#">
                <i class="fa fa-instagram" aria-hidden="true"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- end info_section -->
  
    <!-- footer section -->
  <footer class="container-fluid footer_section">
    <p>
      &copy; <span id="currentYear"></span> All Rights Reserved. Powered by
      <a href="https://safezone.ng">SafeZone</a>
    </p>
  </footer>
    <!-- footer section -->

  <script src="{% static 'js/jquery-3.4.1.min.js' %}"></script>
  <script src="{% static 'js/bootstrap.js' %}"></script>
  <script src="{% static 'js/custom.js' %}"></script>
  <script src="{% static 'js/location.js' %}"></script>
  <script>
    function initAutocomplete() {
        const input = document.getElementById('user_input_location');
        const universityLocation = new google.maps.LatLng(7.4625, 3.8954);  // Coordinates for University of Ibadan

        // Create an autocomplete object and restrict it to the University of Ibadan area
        const autocomplete = new google.maps.places.Autocomplete(input, {
            bounds: new google.maps.LatLngBounds(universityLocation), // Restrict to the University of Ibadan area
            componentRestrictions: { country: 'NG' },  // Limit to Nigeria
            types: ['geocode']  // Limit to addresses
        });

        autocomplete.addListener('place_changed', function () {
            const place = autocomplete.getPlace();
            if (!place.geometry) {
                console.log("No details available for input: " + place.name);
                return;
            }

            const latitude = place.geometry.location.lat();
            const longitude = place.geometry.location.lng();

            // Update hidden fields with latitude and longitude
            document.getElementById('latitude').value = latitude;
            document.getElementById('longitude').value = longitude;
        });
    }

    // Ensure autocomplete function runs once the page loads
    window.onload = function() {
        initAutocomplete();
    };
</script>

</body>

</html>
